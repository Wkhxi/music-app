

/**
 * 歌词解析插件
 */

// 歌词的字符串格式
// "[00:00.000] 作词 : 郑中庸
// [00:01.000] 作曲 : 周杰伦
// [00:20.11]我知道伤心不能改变什么
// [00:24.93]那么 让我诚实一点
// [00:31.07]诚实 难免有无法控制的宣泄
// [00:37.89]只要关上了门不必理谁
// [00:45.35]一个人坐在空荡包厢里面
// [00:50.05]手机让它休息一夜
// [00:56.57]难像切歌切掉回忆的画面
// [01:03.22]时间已流不能十二点
// [01:11.99]生日快乐
// [01:15.52]我对自己说
// [01:18.57]蜡烛点了
// [01:21.38]寂寞亮了
// [01:24.33]生日快乐
// [01:27.39]泪也融了
// [01:30.44]我要谢谢你给的你拿走的一切
// [01:37.40]还爱你 带一点恨
// [01:43.16]还要时间
// [01:46.09]才能平衡
// [01:49.10]美梦伤痕
// [01:52.12]幻灭重生
// [01:55.30]祝我生日生日快乐
// [02:10.20]一个人坐在空荡包厢里面
// [02:15.09]手机让它休息一夜
// [02:21.77]难 像切歌切掉回忆的画面
// [02:28.57]眼泪不能流过十二点
// [02:33.77]生日快乐 我对自己说
// [02:40.32]蜡烛点了
// [02:43.50]寂寞亮了
// [02:46.66]生日快乐
// [02:50.05]泪也融了
// [02:53.30]我要谢谢你给的你拿走的一切
// [03:00.19]还爱你 带一点恨
// [03:06.19]还要时间
// [03:09.46]才能平衡
// [03:12.73]热恋伤痕
// [03:15.96]幻灭重生
// [03:19.21]祝我生日快乐
// [03:32.94]还爱你 带一点恨
// [03:39.31]还要时间
// [03:42.61]才能平衡
// [03:46.04]热恋伤痕
// [03:49.35]幻灭重生
// [03:52.59]祝我生日
// [03:54.29]祝我生日快乐
// "


// 解析 [00:01.997] 这一类时间戳的正则表达式
const timeExp = /\[(\d{2,}):(\d{2})(?:\.(\d{2,3}))?]/g

const STATE_PAUSE = 0
const STATE_PLAYING = 1

export default class Lyric {
  /**
   * @params {string} lrc
   * @params {function} handler
  */ 
  constructor (lrc, handler = () => {}) {
    this.lrc = lrc;
    this.lines = [];// 解析后的数组 包含歌词和时间
    this.handler = handler;
    this.state = STATE_PAUSE; // 播放状态
    this.curLineIndex = 0; // 当前播放歌词所在的行数
    this.startStamp = 0; // 歌曲开始的时间戳

    this._initLines ();
  }

  _initLines () {
  }
}
